<section data-ng-controller="GroupsController" data-ng-init="findOne()">
<div data-ng-if="authentication.user._id != null">
	<div class="page-header">
		<h1 data-ng-bind="group.title"></h1>
	</div>
	<div class="pull-right" data-ng-show="authentication.user._id == group.commissioner._id">
		<a class="btn btn-primary" href="/#!/groups/{{group._id}}/edit">
			<i class="glyphicon glyphicon-edit"></i>
		</a>
		<a class="btn btn-primary" data-ng-click="remove();">
			<i class="glyphicon glyphicon-trash"></i>
		</a>
	</div>
	<small>
		<em class="text-muted">
			Posted on
			<span data-ng-bind="group.created | date:'mediumDate'"></span>
			by
			<span data-ng-bind="group.commissioner.displayName"></span>
		</em>
                <br />
		<em class="text-muted">
			Starting bankroll
			<span data-ng-bind="group.bankroll"></span>
		</em>
                <br />
		<em class="text-muted">
			Max bet
			<span data-ng-bind="group.maxBet"></span>
		</em>
                <br />
                <em class="text-muted">
			Start date
			<span data-ng-bind="group.startDate | date:'mediumDate'"></span>
		</em>
                <br />
                <em class="text-muted">
			End date
			<span data-ng-bind="group.endDate | date:'mediumDate'"></span>
		</em>
		<br />
                <em class="text-muted">
			Currently
			<span>{{getPlayerCount() | number:0}}</span>
			players
		</em>
	</small>
	<p class="lead" data-ng-bind="group.description"></p>
        <div data-ng-show="!group.userInGroup">
		<button class="btn btn-primary btn-lg" ng-click="joinGroup()" ng-if="!groupExpired(group)">Join sharpgroup</button>
	</div>
	<div data-ng-show="group.userInGroup">
		<p>You are a member of this group.</p>
		<h2>Your Bankroll: <span data-ng-bind="group.userBankroll"></span></h2>
		<a class="btn btn-primary btn-lg" ng-if="!groupExpired(group)" href="/#!/events/{{group._id}}"}>Place a wager</a>
		<a class="btn btn-primary btn-lg" href="/#!/wagers/{{group._id}}"}>View your wagers</a>

		<div class="page-header">
			<h1>Leaderboard</h1>
		</div>
		<div class="list-group" data-ng-init="getGroupUsersAndBankrolls()">
			<div class="list-group-item" style="display: table; width: 100%">
					
				<div style="display: table-row; font-weight: bold; width: 100%">
					<div style="display: table-cell; width: 33%">
						<p class="list-group-item-text">Gambler</p>
					</div>
					<div style="display: table-cell; width: 34%">
						<p class="list-group-item-text"># of sharps</p>
					</div>
					<div style="display: table-cell; width: 33%">
						<p class="list-group-item-text">Percentage of pot</p>
					</div>
				</div>

				<div data-ng-repeat="item in items" style="display: table-row; width: 100%">
					<div style="display: table-cell; width: 33%">
						<a class="list-group-item-text" data-ng-bind="item.displayName" href="/#!/wagers/leaderboard/{{group._id}}/{{item.userId}}/{{item.displayName}}"></a>
					</div>
					<div style="display: table-cell; width: 34%">
						<p class="list-group-item-text" data-ng-bind="item.amount"></p>
					</div>
					<div style="display: table-cell; width: 33%">
						<p class="list-group-item-text" data-ng-bind="item.percentage"></p>
					</div>
				</div>
			</div>
		</div>

	</div>
	
	</div>

	</div>
</div>
<div data-ng-if="authentication.user._id == null">
	Sign in to view/join group
</div>

</section>
